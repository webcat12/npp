<!DOCTYPE html>
<meta charset="utf-8">
<title>互通上传下载站</title>
<style>
body{max-width:800px;margin:30px auto;font-family:Arial;padding:0 15px}
.card{border:1px solid #ddd;padding:20px;border-radius:10px;margin:20px 0}
button{background:#007bff;color:white;border:none;padding:10px 15px;border-radius:6px;cursor:pointer}
.item{padding:10px;border-bottom:1px solid #eee}
a{color:#007bff;text-decoration:none}
</style>

<h1>简单互通上传下载</h1>

<div class="card">
  <h3>上传文件（所有人可见）</h3>
  <input type="file" id="f">
  <button onclick="up()">上传</button>
</div>

<div class="card">
  <h3>文件列表</h3>
  <div id="list"></div>
</div>

<script>
// 真正互通的云存储（免费公用）
const API = "https://jsonbox.io/demobin_shared_files";

// 显示列表
async function show() {
  const r = await fetch(API);
  const d = await r.json();
  document.getElementById("list").innerHTML = d.map(i => `
    <div class="item">
      ${i.name} 
      <a href="${i.url}" download style="margin-left:10px">下载</a>
    </div>
  `).join("");
}

// 上传
async function up() {
  const file = document.getElementById("f").files[0];
  if (!file) return alert("请选择文件");
  
  const form = new FormData();
  form.append("file", file);
  
  const upRes = await fetch("https://file.io", { method: "POST", body: form });
  const upData = await upRes.json();
  
  await fetch(API, {
    method: "POST",
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify({
      name: file.name,
      url: upData.link
    })
  });
  
  show();
  alert("上传成功！全世界都能看到！");
}

show();
</script>
